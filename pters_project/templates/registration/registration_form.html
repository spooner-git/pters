
{% load static %}
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

{% block local_css %}

<meta name="registertrainer" content="trainer_register">
<link rel="stylesheet" href={% static "user/css/trainer/pters.trainer.register.css" %}>

<link rel="icon" href="/static/common/favicon.ico">
<link rel="apple-touch-icon" href="/static/common/favicon-152.png">
<link rel="shortcut icon" href="/static/common/favicon-152.png">

{% endblock %}

{% block content %}
<body> 

    <div class="typeselectbox registerbox">
        <div class="registerbox_label">
          <img src="/static/user/res/daycal_arrow.png" onclick='goPrev()' class="back_arrow">
          <p class="_step1_label"><img src="/static/user/res/PTERS_logo_pure.png">가입 유형 선택 
          <div class="registerbox_sublabel _step1_label">STEP 1<br>가입하고자 하는 회원 유형을 선택해주세요. <br> PTERS는 누구에게나 무료입니다!</div>
          <p class="_step2_label"><img src="/static/user/res/PTERS_logo_pure.png"><span></span>
          <div class="registerbox_sublabel _step2_label">STEP 2<br>회원정보를 입력해주세요 <br> PTERS는 누구에게나 무료입니다!</div>
          <p class="_step3_label"><img src="/static/user/res/PTERS_logo_pure.png"><span>가입 약관</span>
          <div class="registerbox_sublabel _step3_label">STEP 3<br>제공하는 서비스를 사용하기 위한 약관입니다. <br> PTERS는 누구에게나 무료입니다!</div>
        </div>

          

        <div class="outerbox_horizontal" data-view="init">
          <div class="explainbox _type_trainee">
            <img src="/static/user/res/login/icon-reg-user.png">
            <p>PT 일정 예약 관리 <br><span class="font-pink">PT 회원</span></p>
            <div class="explaintype">
              <p class="explain_subject">원하는 시간대에 PT 바로 예약</p>
              <p class="explain_descript">예약일시 변경도 터치 한번으로 간단하게</p>
              <p class="explain_subject">나의 PT현황 실시간 확인</p>
              <p class="explain_descript">남은 횟수와 지난 이력을 한눈에 확인</p>
              <button class="" >일반 회원 가입</button>
            </div>
          </div>
          <div class="explainbox _type_trainer">
            <img src="/static/user/res/login/icon-reg-trainer.png" style="height: 20px;margin-bottom: 5px;margin-top: 20px;">
            <p>PT 회원 및 업무 일정 관리<br><span class="font-pink">PT 트레이너</span></p>
            <div class="explaintype">
              <p class="explain_subject">회원 주도적인 PT 예약 시스템</p> 
              <p class="explain_descript">강사는 업무에 집중 가능</p>
              <p class="explain_subject">회원 특성별 맞춤 관리</p>
              <p class="explain_descript">회원 정보와 PT정보를 연계하여 효과적 활용</p>
              <button class="" >트레이너 가입</button>
            </div>
          </div>
          <div class="explainbox _type_gym">
            <img src="/static/user/res/login/icon-reg-gym.png">
            <p>소속 트레이너 및 업무 일정 관리<br><span class="font-pink">센터 운영 사업자</span></p>
            <div class="explaintype">
              <p class="explain_subject">트레이너 일정을 한눈에 확인</p> 
              <p class="explain_descript">시각화된 스케쥴 화면으로 간단히 파악</p>
              <p class="explain_subject">소속 트레이너 변동사항 관리</p>
              <p class="explain_descript">변동사항 발생시 PT회원 정보 이관의 편리성</p>
              <button class="" >센터사업자 가입</button>
            </div>
          </div>
        </div>


        <div class="registerbox_add">
            <div id="global_error_msg"></div>
           <div class="outerbox">
                <input type="text" name="" maxlength="15" placeholder="성" id="familyname_input">
                <input type="text" name="" maxlength="15" placeholder="이름" id="lastname_input">
                <button class="selector_button" data-type="M">남</button>
                <button class="selector_button" data-type="W">여</button>
           </div>

           <div class="outerbox">
                <input type="text" name="" placeholder="새로운 ID" id="id_input">
                <button class="register_button" onclick="javascript:check_id();">중복 확인</button>
                <span class="id_confirm"></span>
           </div>

           <div class="outerbox">
                <input type="password" name="" placeholder="새 비밀번호"  id="pw_input">
                <input type="password" name="" placeholder="비밀번호 확인" id="pw_input_re"><span class="pw_confirm"></span>
           </div>

           <div class="outerbox">
               <input type="" name="" placeholder="이메일"  id="email_input"> @ 
               <input type="" name="" placeholder="이메일 뒷부분"  id="email_input_re" readonly>
               <select class="login_dropdown" id="email_option">
                   <option id="optionnone">선택</option>
                   <option id="gmail">gmail.com</option>
                   <option id="naver">naver.com</option>
                   <option id="daum">daum.net</option>
                   <option id="self">직접 입력</option>
               </select>
           </div>

           <div class="outerbox">
               <span>생일</span>
               <select class="login_dropdown" id="birth_year">
               </select>
               <select class="login_dropdown" id="birth_month">
               </select>
               <select class="login_dropdown" id="birth_date">
               </select>
               <span class="birth_confirm"></span>
           </div>

           <div class="outerbox">
               <span>국가</span>
               <select class="login_dropdown"  id="country_input">
                  <option value="USA">United States</option>
                  <option value="KOR">대한민국</option>
                  <option value="JPN">日本</option>
                  <option value="CHN">China</option>
                  <option value="AFG">Afghanistan</option>
                  <option value="ALA">Åland Islands</option>
                  <option value="ALB">Albania</option>
                  <option value="DZA">Algeria</option>
                  <option value="ASM">American Samoa</option>
                  <option value="AND">Andorra</option>
                  <option value="AGO">Angola</option>
                  <option value="AIA">Anguilla</option>
                  <option value="ATA">Antarctica</option>
                  <option value="ATG">Antigua and Barbuda</option>
                  <option value="ARG">Argentina</option>
                  <option value="ARM">Armenia</option>
                  <option value="ABW">Aruba</option>
                  <option value="AUS">Australia</option>
                  <option value="AUT">Austria</option>
                  <option value="AZE">Azerbaijan</option>
                  <option value="BHS">Bahamas</option>
                  <option value="BHR">Bahrain</option>
                  <option value="BGD">Bangladesh</option>
                  <option value="BRB">Barbados</option>
                  <option value="BLR">Belarus</option>
                  <option value="BEL">Belgium</option>
                  <option value="BLZ">Belize</option>
                  <option value="BEN">Benin</option>
                  <option value="BMU">Bermuda</option>
                  <option value="BTN">Bhutan</option>
                  <option value="BOL">Bolivia, Plurinational State of</option>
                  <option value="BES">Bonaire, Sint Eustatius and Saba</option>
                  <option value="BIH">Bosnia and Herzegovina</option>
                  <option value="BWA">Botswana</option>
                  <option value="BVT">Bouvet Island</option>
                  <option value="BRA">Brazil</option>
                  <option value="IOT">British Indian Ocean Territory</option>
                  <option value="BRN">Brunei Darussalam</option>
                  <option value="BGR">Bulgaria</option>
                  <option value="BFA">Burkina Faso</option>
                  <option value="BDI">Burundi</option>
                  <option value="KHM">Cambodia</option>
                  <option value="CMR">Cameroon</option>
                  <option value="CAN">Canada</option>
                  <option value="CPV">Cape Verde</option>
                  <option value="CYM">Cayman Islands</option>
                  <option value="CAF">Central African Republic</option>
                  <option value="TCD">Chad</option>
                  <option value="CHL">Chile</option>
                  <option value="CXR">Christmas Island</option>
                  <option value="CCK">Cocos (Keeling) Islands</option>
                  <option value="COL">Colombia</option>
                  <option value="COM">Comoros</option>
                  <option value="COG">Congo</option>
                  <option value="COD">Congo, the Democratic Republic of the</option>
                  <option value="COK">Cook Islands</option>
                  <option value="CRI">Costa Rica</option>
                  <option value="CIV">Côte d'Ivoire</option>
                  <option value="HRV">Croatia</option>
                  <option value="CUB">Cuba</option>
                  <option value="CUW">Curaçao</option>
                  <option value="CYP">Cyprus</option>
                  <option value="CZE">Czech Republic</option>
                  <option value="DNK">Denmark</option>
                  <option value="DJI">Djibouti</option>
                  <option value="DMA">Dominica</option>
                  <option value="DOM">Dominican Republic</option>
                  <option value="ECU">Ecuador</option>
                  <option value="EGY">Egypt</option>
                  <option value="SLV">El Salvador</option>
                  <option value="GNQ">Equatorial Guinea</option>
                  <option value="ERI">Eritrea</option>
                  <option value="EST">Estonia</option>
                  <option value="ETH">Ethiopia</option>
                  <option value="FLK">Falkland Islands (Malvinas)</option>
                  <option value="FRO">Faroe Islands</option>
                  <option value="FJI">Fiji</option>
                  <option value="FIN">Finland</option>
                  <option value="FRA">France</option>
                  <option value="GUF">French Guiana</option>
                  <option value="PYF">French Polynesia</option>
                  <option value="ATF">French Southern Territories</option>
                  <option value="GAB">Gabon</option>
                  <option value="GMB">Gambia</option>
                  <option value="GEO">Georgia</option>
                  <option value="DEU">Germany</option>
                  <option value="GHA">Ghana</option>
                  <option value="GIB">Gibraltar</option>
                  <option value="GRC">Greece</option>
                  <option value="GRL">Greenland</option>
                  <option value="GRD">Grenada</option>
                  <option value="GLP">Guadeloupe</option>
                  <option value="GUM">Guam</option>
                  <option value="GTM">Guatemala</option>
                  <option value="GGY">Guernsey</option>
                  <option value="GIN">Guinea</option>
                  <option value="GNB">Guinea-Bissau</option>
                  <option value="GUY">Guyana</option>
                  <option value="HTI">Haiti</option>
                  <option value="HMD">Heard Island and McDonald Islands</option>
                  <option value="VAT">Holy See (Vatican City State)</option>
                  <option value="HND">Honduras</option>
                  <option value="HKG">Hong Kong</option>
                  <option value="HUN">Hungary</option>
                  <option value="ISL">Iceland</option>
                  <option value="IND">India</option>
                  <option value="IDN">Indonesia</option>
                  <option value="IRN">Iran, Islamic Republic of</option>
                  <option value="IRQ">Iraq</option>
                  <option value="IRL">Ireland</option>
                  <option value="IMN">Isle of Man</option>
                  <option value="ISR">Israel</option>
                  <option value="ITA">Italy</option>
                  <option value="JAM">Jamaica</option>
                  <option value="JEY">Jersey</option>
                  <option value="JOR">Jordan</option>
                  <option value="KAZ">Kazakhstan</option>
                  <option value="KEN">Kenya</option>
                  <option value="KIR">Kiribati</option>
                  <option value="PRK">Korea, Democratic People's Republic of</option>
                  <option value="KWT">Kuwait</option>
                  <option value="KGZ">Kyrgyzstan</option>
                  <option value="LAO">Lao People's Democratic Republic</option>
                  <option value="LVA">Latvia</option>
                  <option value="LBN">Lebanon</option>
                  <option value="LSO">Lesotho</option>
                  <option value="LBR">Liberia</option>
                  <option value="LBY">Libya</option>
                  <option value="LIE">Liechtenstein</option>
                  <option value="LTU">Lithuania</option>
                  <option value="LUX">Luxembourg</option>
                  <option value="MAC">Macao</option>
                  <option value="MKD">Macedonia, the former Yugoslav Republic of</option>
                  <option value="MDG">Madagascar</option>
                  <option value="MWI">Malawi</option>
                  <option value="MYS">Malaysia</option>
                  <option value="MDV">Maldives</option>
                  <option value="MLI">Mali</option>
                  <option value="MLT">Malta</option>
                  <option value="MHL">Marshall Islands</option>
                  <option value="MTQ">Martinique</option>
                  <option value="MRT">Mauritania</option>
                  <option value="MUS">Mauritius</option>
                  <option value="MYT">Mayotte</option>
                  <option value="MEX">Mexico</option>
                  <option value="FSM">Micronesia, Federated States of</option>
                  <option value="MDA">Moldova, Republic of</option>
                  <option value="MCO">Monaco</option>
                  <option value="MNG">Mongolia</option>
                  <option value="MNE">Montenegro</option>
                  <option value="MSR">Montserrat</option>
                  <option value="MAR">Morocco</option>
                  <option value="MOZ">Mozambique</option>
                  <option value="MMR">Myanmar</option>
                  <option value="NAM">Namibia</option>
                  <option value="NRU">Nauru</option>
                  <option value="NPL">Nepal</option>
                  <option value="NLD">Netherlands</option>
                  <option value="NCL">New Caledonia</option>
                  <option value="NZL">New Zealand</option>
                  <option value="NIC">Nicaragua</option>
                  <option value="NER">Niger</option>
                  <option value="NGA">Nigeria</option>
                  <option value="NIU">Niue</option>
                  <option value="NFK">Norfolk Island</option>
                  <option value="MNP">Northern Mariana Islands</option>
                  <option value="NOR">Norway</option>
                  <option value="OMN">Oman</option>
                  <option value="PAK">Pakistan</option>
                  <option value="PLW">Palau</option>
                  <option value="PSE">Palestinian Territory, Occupied</option>
                  <option value="PAN">Panama</option>
                  <option value="PNG">Papua New Guinea</option>
                  <option value="PRY">Paraguay</option>
                  <option value="PER">Peru</option>
                  <option value="PHL">Philippines</option>
                  <option value="PCN">Pitcairn</option>
                  <option value="POL">Poland</option>
                  <option value="PRT">Portugal</option>
                  <option value="PRI">Puerto Rico</option>
                  <option value="QAT">Qatar</option>
                  <option value="REU">Réunion</option>
                  <option value="ROU">Romania</option>
                  <option value="RUS">Russian Federation</option>
                  <option value="RWA">Rwanda</option>
                  <option value="BLM">Saint Barthélemy</option>
                  <option value="SHN">Saint Helena, Ascension and Tristan da Cunha</option>
                  <option value="KNA">Saint Kitts and Nevis</option>
                  <option value="LCA">Saint Lucia</option>
                  <option value="MAF">Saint Martin (French part)</option>
                  <option value="SPM">Saint Pierre and Miquelon</option>
                  <option value="VCT">Saint Vincent and the Grenadines</option>
                  <option value="WSM">Samoa</option>
                  <option value="SMR">San Marino</option>
                  <option value="STP">Sao Tome and Principe</option>
                  <option value="SAU">Saudi Arabia</option>
                  <option value="SEN">Senegal</option>
                  <option value="SRB">Serbia</option>
                  <option value="SYC">Seychelles</option>
                  <option value="SLE">Sierra Leone</option>
                  <option value="SGP">Singapore</option>
                  <option value="SXM">Sint Maarten (Dutch part)</option>
                  <option value="SVK">Slovakia</option>
                  <option value="SVN">Slovenia</option>
                  <option value="SLB">Solomon Islands</option>
                  <option value="SOM">Somalia</option>
                  <option value="ZAF">South Africa</option>
                  <option value="SGS">South Georgia and the South Sandwich Islands</option>
                  <option value="SSD">South Sudan</option>
                  <option value="ESP">Spain</option>
                  <option value="LKA">Sri Lanka</option>
                  <option value="SDN">Sudan</option>
                  <option value="SUR">Suriname</option>
                  <option value="SJM">Svalbard and Jan Mayen</option>
                  <option value="SWZ">Swaziland</option>
                  <option value="SWE">Sweden</option>
                  <option value="CHE">Switzerland</option>
                  <option value="SYR">Syrian Arab Republic</option>
                  <option value="TWN">Taiwan, Province of China</option>
                  <option value="TJK">Tajikistan</option>
                  <option value="TZA">Tanzania, United Republic of</option>
                  <option value="THA">Thailand</option>
                  <option value="TLS">Timor-Leste</option>
                  <option value="TGO">Togo</option>
                  <option value="TKL">Tokelau</option>
                  <option value="TON">Tonga</option>
                  <option value="TTO">Trinidad and Tobago</option>
                  <option value="TUN">Tunisia</option>
                  <option value="TUR">Turkey</option>
                  <option value="TKM">Turkmenistan</option>
                  <option value="TCA">Turks and Caicos Islands</option>
                  <option value="TUV">Tuvalu</option>
                  <option value="UGA">Uganda</option>
                  <option value="UKR">Ukraine</option>
                  <option value="ARE">United Arab Emirates</option>
                  <option value="GBR">United Kingdom</option>
                  <option value="UMI">United States Minor Outlying Islands</option>
                  <option value="URY">Uruguay</option>
                  <option value="UZB">Uzbekistan</option>
                  <option value="VUT">Vanuatu</option>
                  <option value="VEN">Venezuela, Bolivarian Republic of</option>
                  <option value="VNM">Viet Nam</option>
                  <option value="VGB">Virgin Islands, British</option>
                  <option value="VIR">Virgin Islands, U.S.</option>
                  <option value="WLF">Wallis and Futuna</option>
                  <option value="ESH">Western Sahara</option>
                  <option value="YEM">Yemen</option>
                  <option value="ZMB">Zambia</option>
                  <option value="ZWE">Zimbabwe</option>
               </select>
           </div>

           <div class="outerbox">
               <span>지역</span>
               <select class="login_dropdown"  id="region_input">
                   <option disabled selected>선택</option>
                   <option>서울특별시</option>
                   <option>부산광역시</option>
                   <option>인천광역시</option>
                   <option>대구광역시</option>
                   <option>대전광역시</option>
                   <option>광주광역시</option>
                   <option>울산광역시</option>
                   <option>세종특별자치시</option>
                   <option>제주특별자치도</option>
                   <option>강원도</option>
                   <option>경기도</option>
                   <option>충청남도</option>
                   <option>충청북도</option>
                   <option>전라남도</option>
                   <option>전라북도</option>
                   <option>경상남도</option>
                   <option>경상북도</option>
               </select>
           </div>

           <div class="buttongroup">
                <button id="cancelMember" onclick="goPrev()">
                   <span>이전</span>
                </button>
                <button id="registerMember">
                    <span>다음</span>
                </button>
           </div>
        </div>

        <div class="promise_wrap">
          <p class="registerbox_smalllabel">개인정보 약관</p>
           <div class="contractread">
               개인정보 약관
           </div>
           <div  class="contractread_check">
               <input type="checkbox" name="" id="checkbox1"><span style="font-size: 12px;">위 약관에 동의합니다.</span>
           </div>

           <p class="registerbox_smalllabel">가입 약관</p>
            <div class="contractread">
               가입 약관
           </div>
           <div class="contractread_check">
               <input type="checkbox" name="" id="checkbox2"><span style="font-size: 12px;">위 약관에 동의합니다.</span>
           </div>
           <div class="buttongroup">
                <button id="cancelMember" onclick="goPrev()">
                   <span>이전</span>
                </button>
                <button id="registerMemberFinal">
                  <span>등록</span>
                </button>
            </div>
        </div>

    </div>

    <form action="." id="add-member-id-form" method="post">
        {% csrf_token %}
        <div style="display: none">
          {{ form.as_p }}
        </div>
        <input type="hidden" name="id" id="newid2" value="" >
        <input type="hidden" name="first_name" id="first_name" value="" >
        <input type="hidden" name="last_name" id="last_name" value="" >
        <input type="hidden" name="name" id="newname" value="" >
        <input type="hidden" name="sex" id="newsex" value="" >
        <input type="hidden" name="birthday" id="newbirth" value="" >
        <input type="hidden" name="address" id="newregion" value="" >
        <input type="hidden" id="id_duplicate_check" value="none" >
        <input type="hidden" name="group_type" id="id_group_type" value="trainee">
    </form>


    <footer class="fixfooter bottomzero">
        <div class="bottomfooter1">
            <span>English</span><span style="margin-left:10px;margin-right: 10px;">|</span>
            <span>한국어</span><span style="margin-left:10px;margin-right: 10px;">|</span>
            <span>日本語</span><span style="margin-left:10px;margin-right: 10px;">|</span>
        </div>
        <div class="bottomfooter2">
            <span><img src="/static/user/res/spooner.png" style="width: 60px;margin-right: 20px;vertical-align: middle;"></span>
            <span>회사소개</span><span style="margin-left:10px;margin-right: 10px;">|</span>
            <span>이용안내</span><span style="margin-left:10px;margin-right: 10px;">|</span>
            <span>제휴제안</span><span style="margin-left:10px;margin-right: 10px;">|</span>
            <span>개인정보처리방침</span><span style="margin-left:10px;margin-right: 10px;">|</span>
            <span>고객센터</span><span style="margin-left:10px;margin-right: 10px;">|</span>
        </div>
    </footer>


{% endblock %}

{% block local_js_footer %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>

  var group_type, $form; 

  $('div.explainbox ').click(function(){
      if($(this).find('.explaintype').css('height') == '0px'){
        $(this).find('.explaintype').css('height','220px')
        $(this).find('button').css('visibility','visible')
        $(this).siblings('.explainbox').find('button').css('visibility','hidden')
        $(this).siblings('.explainbox').find('.explaintype').css('height','0px')
      }
  })


  $('.explainbox button').click(function(){
      $('._step1_label').css('transform','translateX(-250%)')
      $('.outerbox_horizontal').css('transform','translateX(-250%)')
      $('.registerbox_add').css('transform','translateX(-50%)')
      $('._step2_label').css('transform','translateX(-50%)')
      scrollToIndicator($('.typeselectbox'),500)

      $('.outerbox_horizontal').attr('data-view',0)
      $('._step2_label span').text($(this).text())
      if($(this).text() == "일반 회원 가입"){
        group_type = 'trainee'
        $form = $('#add-member-id-form')
      }else if($(this).text() == "트레이너 가입"){
        group_type = 'trainer'
        $form = $('#add-member-id-form')
      }else if($(this).text() == "센터사업자 가입"){
        group_type = 'center'
        $form = $('#add-member-id-form')
      }
      $('#id_group_type').val(group_type)
      input_birth_to_form()
  })

  function scrollToIndicator(dom, delaytime){
    var offset = dom.offset();
      $('body, html').animate({scrollTop : offset.top}, delaytime)
  }


  $('button#registerMember').click(function(){
    var duplicate_check = $form.find('#id_duplicate_check').val()
      if(duplicate_check == 1){
          $('.registerbox_add').css('transform','translateX(-400%)')
          $('._step2_label').css('transform','translateX(-400%)')

          $('.promise_wrap').css('transform','translateX(-50%)')
          $('._step3_label').css('transform','translateX(-50%)')
          $('.outerbox_horizontal').attr('data-view',1)
      }else if(duplicate_check == 0){
          alert('사용할 수 없는 아이디')
      }else if(duplicate_check == 'none'){
          alert('중복 체크 필요')
      }
      
  })


  function goPrev(){
    if($('.outerbox_horizontal').attr('data-view')==0){
        $('._step1_label').css('transform','translateX(-50%)')
        $('.outerbox_horizontal').css('transform','translateX(-50%)')
        $('.registerbox_add').css('transform','translateX(250%)')
        $('._step2_label').css('transform','translateX(250%)')
        $('.outerbox_horizontal').attr('data-view','init')
    }else if($('.outerbox_horizontal').attr('data-view')==1){
        $('.registerbox_add').css('transform','translateX(-50%)')
        $('._step2_label').css('transform','translateX(-50%)')
        $('.promise_wrap').css('transform','translateX(250%)')
        $('._step3_label').css('transform','translateX(250%)')
        $('.outerbox_horizontal').attr('data-view',0)
    }else{
        location.href='{% url 'login:logout' %}'
    }
  }


   $('#id_input').keyup(function(){
        var userinput = $(this).val()
        $('#id_username').attr('value',userinput)
        $form.find('#newid2').attr('value',userinput)
    })

    $('#pw_input_re').keyup(function(){
        if($('#pw_input').val().length > 0){
            if($(this).val().length==0){
                $('.pw_confirm').css({'display':'none'})
                $form.find()
                $('#id_password1').attr('value',"")
                $('#id_password2').attr('value',"")
            }else if($(this).val() != $('#pw_input').val()){
                $('.pw_confirm').text('비밀번호 불일치').css({'display':'inline','color':'#fe4e65'})
                $('#id_password1').attr('value',"")
                $('#id_password2').attr('value',"")
            }else{
                $('.pw_confirm').text('비밀번호 일치').css({'display':'inline','color':'green'})
                $('#id_password1').attr('value',$(this).val())
                $('#id_password2').attr('value',$(this).val())
            }
        }else{
            $('.pw_confirm').css({'display':'none'})
            $('#id_password1').attr('value',"")
            $('#id_password2').attr('value',"")
        }
    })


    var yearoption = ['<option>연도</option>']
    for(var i=2018; i>=1908; i--){
        if(i == 1990){
            yearoption.push('<option selected>'+i+'년</option>')
        }else{
            yearoption.push('<option>'+i+'년</option>')
        }
    }
    var birth_year_options = yearoption.join('')
    $('#birth_year').html(birth_year_options)


    var monthoption = ['<option>월</option>']
    for(var i=1; i<=12; i++){
        if(i == 10){
            monthoption.push('<option data-month="'+i+'" selected>'+i+'월</option>')
        }else{
            monthoption.push('<option data-month="'+i+'">'+i+'월</option>')
        }
    }
    var birth_month_options = monthoption.join('')
    $('#birth_month').html(birth_month_options)


    var dateoption = ['<option>일</option>']
    for(var i=1; i<=31; i++){
        if(i == 10){
            dateoption.push('<option selected>'+i+'일</option>')
        }else{
            dateoption.push('<option>'+i+'일</option>')
        }
        
    }
    var birth_date_options = dateoption.join('')
    $('#birth_date').html(birth_date_options)


    $('#birth_month').change(function(){
        var dateoption = []
        $('#birth_date').html("")
        var lastDay = [31,29,31,30,31,30,31,31,30,31,30,31];
        var month = $(this).val().replace(/월/gi,"")
        for(var i=1; i<=lastDay[month-1]; i++){
            dateoption.push('<option>'+i+'일</option>')
        }
        var birth_date_options = dateoption.join('')
        $('#birth_date').html(birth_date_options)
    })


    $('.selector_button').click(function(){
        $(this).addClass('selector_button_checked')
        $(this).siblings().removeClass('selector_button_checked')
        $form.find('#newsex').attr('value',$(this).attr('data-type'))
    })

    $('#familyname_input').keyup(function(){
        if($(this).val().length>0){
            $form.find('#newname').attr('value', $(this).val() + '' + $('#lastname_input').val())
            $form.find('#last_name').attr('value', $(this).val())
        }else{
            $form.find('#newname').attr('value',"")
        }
    })
    
    $('#lastname_input').keyup(function(){
        if($(this).val().length>0){
            $form.find('#newname').attr('value', $('#familyname_input').val() + '' + $(this).val())
            $form.find('#first_name').attr('value', $(this).val())
        }else{
            $form.find('#newname').attr('value',"")
        }
    })

    $('#email_input').keyup(function(){
        if($('#email_input_re').val().length>0){
            $('#id_email').attr('value', $(this).val()+'@'+$('#email_input_re').val())
        }else{
            $('#id_email').attr('value',"")
        }
    })

    $('#email_option').change(function(){
        if($(this).val() =="직접 입력"){
            $('#email_input_re').attr('readonly',false).val("")
            $('#email_input_re').keyup(function(){
                if($('#email_input').val().length>0){
                    $('#id_email').attr('value', $('#email_input').val()+'@'+$('#email_input_re').val())
                }else{
                    $('#id_email').attr('value',"")
                }
            })
        }else if($(this).val()!="선택"){
            $('#email_input_re').val($(this).val())
            $('#email_input_re').attr('readonly',true)
        }else{
            $('#email_input_re').attr('readonly',true).val("")
        }

        if($('#email_input').val().length>0){
            $('#id_email').attr('value', $('#email_input').val()+'@'+$('#email_input_re').val())
        }else{
            $('#id_email').attr('value',"")
        }
    })

    $('#birth_year, #birth_month, #birth_date').change(function(){
        input_birth_to_form()
    })

    


    $('#region_input').change(function(){
        $form.find('#newregion').attr('value',$(this).val())
    })


    $('button#registerMemberFinal').click(function(){
        if($('#checkbox1').is(':checked') && $('#checkbox2').is(':checked')){
            //document.getElementById('add-member-id-form').submit();
              var $form = $('#add-member-id-form')
              var serializeArray = $form.serializeArray();
              $.ajax({
                  //url:'/accounts/register/',
                  url:'/login/add_member_info/',
                  type:'POST',
                  data:serializeArray,
                  dataType : 'html',

                  beforeSend:function(){
                  },

                  //통신성공시 처리
                  success:function(data){
                      memberInfo_add(data);
                    },

                  //보내기후 팝업창 닫기
                  complete:function(){
                    },

                  //통신 실패시 처리
                  error:function(){
                    
                  },
              })
        }else{
            alert('약관 동의필요 : 테스트 페이지 입니다.')
        }
    })

    function input_birth_to_form(){
        var year = $('#birth_year').val().replace(/년/gi,"")
        var month = $('#birth_month').val().replace(/월/gi,"")
        var date = $('#birth_date').val().replace(/일/gi,"")
        var birthdata = year+'-'+month+'-'+date
        $form.find('#newbirth').attr('value',birthdata)
    }

    function memberInfo_add(data){
                    var jsondata = JSON.parse(data);
                    if(jsondata.messageArray.length > 0){
                      $('#global_error_msg').show().html(jsondata.messageArray)
                      $('.registerbox_add').css('transform','translateX(-50%)')
                      $('._step2_label').css('transform','translateX(-50%)')
                      $('.promise_wrap').css('transform','translateX(250%)')
                      $('._step3_label').css('transform','translateX(250%)')
                      $('.outerbox_horizontal').attr('data-view',0)
                      setTimeout(function(){
                        $('#global_error_msg').fadeOut()
                        //$('ul.errorlist').remove()
                      },10000)
                    }else{
                      alert('이메일 인증후 로그인 해주세요')
                      goHome()
                    }
    }

    function goHome(){
        location.href="{% url 'login:logout' %}"
    }


    function check_id(){
        $.ajax({
                url:'/login/check_member_id/',
                type:'POST',
                data:{"id" : $('#id_input').val() },
                dataType : 'html',

                beforeSend:function(){
                },

                //통신성공시 처리
                success:function(data){
                    var jsondata = JSON.parse(data);
                    var id_check_message = jsondata.id_check_result
                    if(id_check_message[0].length>0){
                      var error_msg = id_check_message[0]
                      $('.id_confirm').text(error_msg).css({'display':'inline','color':'#fe4e65'})
                      $form.find('#id_duplicate_check').val(0)
                    }else{
                      $('.id_confirm').text('사용 가능').css({'display':'inline','color':'green'})
                      $form.find('#id_duplicate_check').val(1)
                    }
                  },

                //보내기후 팝업창 닫기
                complete:function(){

                  },

                //통신 실패시 처리
                error:function(){
                  alert("에러: 서버 통신 실패")
                },
            })
    }




</script>
{% endblock %}

</body>