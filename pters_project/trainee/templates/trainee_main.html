{% extends "trainee_base.html" %}
{% load static_url %}

{% block local_css %}
    <link rel="stylesheet" href={% static_url "user/css/trainee/page/pters.trainee.page.main.css" %}>
{% endblock %}

{% block content %}
    {% now "Y.m.d (l)" as today %}
    <div class="trainee_main">
        <div class="wrapper_title ">
            <div class="obj_font_size_12_weight_500">
            {{ today |cut:"요일" }}
            </div>
            <div class="obj_table_raw">
                <div class="wrapper_program_title obj_table_cell_x2 obj_font_size_18_weight_bold">
                    {% if request.session.program_title %}
                        {{ request.session.program_title }}
                    {% else %}
                        선택 안됨
                    {% endif %}
                </div>
                <div class="wrapper_program_select obj_table_cell_x2 obj_font_size_13_weight_500">
                    프로그램 선택
                </div>
            </div>
        </div>

        <div class="wrapper_new_request">
            <div class="obj_box_full">
                <div class="wrapper_sub_title obj_font_size_11_weight_bold obj_font_color_dark_grey">새로운 프로그램</div>
                <div class="wrapper_program_title obj_table_cell_x2 obj_font_size_18_weight_bold">%프로그램명%</div>
                <div class="obj_box_card obj_font_bg_white_black">
                    <div class="obj_font_size_15_weight_bold">나의 완벽한 라인을 위해</div>
                    <div class="obj_font_size_12_weight_normal">안지영 강사</div>
                </div>
                <div class="wrapper_request_select_box">
                    <div class="obj_font_size_11_weight_normal obj_font_color_light_black">강사님이 연동을 신청했습니다.</div>
                    <div class="obj_button_gen obj_font_bg_white_black">연결하기</div>
                    <div class="obj_button_gen obj_font_bg_white_grey">취소하기</div>
                </div>
            </div>
        </div>

        <div class="wrapper_box_next_plan">
            <div class="obj_box_full">
                <div class="wrapper_sub_title obj_font_size_11_weight_bold obj_font_color_dark_grey">다음 일정</div>

                {% if next_schedule_info %}
                    <div class="obj_box_full_grey">
                        <div class="wrapper_tag">
                            <div class="obj_tag obj_font_bg_white_black">예약완료</div>
                        </div>
                        <div class="wrapper_lecture_title obj_font_size_15_weight_500">
                            ({{ next_schedule_info.group_type_name }}) {{ next_schedule_info.group_name }}
                        </div>
                        <div class="wrapper_plan_info">
                            <div class="obj_table_raw obj_font_size_10_weight_500 obj_font_color_light_grey">
                                <div class="obj_table_cell_x3">일자</div>
                                <div class="obj_table_cell_x3">요일</div>
                                <div class="obj_table_cell_x3">진행시간</div>
                            </div>
                            <div class="obj_table_raw obj_font_size_14_weight_500">
                                <div class="obj_table_cell_x3">{{ next_schedule_info.start_dt | date:'Y.m.d' }}</div>
                                <div class="obj_table_cell_x3">{{ next_schedule_info.start_dt | date:"l" }}</div>
                                <div class="obj_table_cell_x3">{{ next_schedule_info.start_dt | time:'H:i' }} ~ {{ next_schedule_info.end_dt | time:'H:i' }}</div>
                            </div>
                        </div>
                        {% if next_schedule_info.note %}
                        <div class="wrapper_teacher_memo_text obj_font_size_12_weight_normal"><span>"{{ next_schedule_info.note }}"</span></div>
                        {% endif %}
                    </div>
                    <div class="obj_table_raw wrapper_cancel_notice">
                        <div class="obj_table_cell_x2 obj_font_size_11_weight_normal obj_font_color_light_black">취소 가능 시간까지 <span class="obj_font_size_11_weight_500 obj_font_color_black">3시간 26분</span> 남았습니다.</div>
                        <div class="obj_table_cell_x2 obj_button_gen obj_font_bg_white_grey"
                             onclick="layer_popup.open_layer_popup(POPUP_BASIC, 'popup_basic_user_select', POPUP_SIZE_WINDOW, POPUP_FROM_PAGE,
                                                                   {'popup_title':'', 'popup_comment':'정말 취소하시겠습니까?',
                                                                   'onclick_function':`func_schedule('form_plan_delete', ${CALL_PAGE_MOVE}, '${DELETE}')`})">취소하기</div>
                    </div>
                {% else %}
                    <div class="obj_box_full_grey">
                        <div class="wrapper_tag">
                            <div class="obj_tag obj_font_bg_white_black">예약완료</div>
                        </div>
                        <div class="wrapper_lecture_title obj_font_size_15_weight_500">
                            ({{ next_schedule_info.group_type_name }}) {{ next_schedule_info.group_name }}
                        </div>
                        <div class="wrapper_plan_info">
                            <div class="obj_table_raw obj_font_size_10_weight_500 obj_font_color_light_grey">
                                <div class="obj_table_cell_x3">일자</div>
                                <div class="obj_table_cell_x3">요일</div>
                                <div class="obj_table_cell_x3">진행시간</div>
                            </div>
                            <div class="obj_table_raw obj_font_size_14_weight_500">
                                <div class="obj_table_cell_x3">{{ next_schedule_info.start_dt | date:'Y.m.d' }}</div>
                                <div class="obj_table_cell_x3">{{ next_schedule_info.start_dt | date:"l" }}</div>
                                <div class="obj_table_cell_x3">{{ next_schedule_info.start_dt | time:'H:i' }} ~ {{ next_schedule_info.end_dt | time:'H:i' }}</div>
                            </div>
                        </div>
                        {% if next_schedule_info.note %}
                        <div class="wrapper_teacher_memo_text obj_font_size_12_weight_normal"><span>"{{ next_schedule_info.note }}"</span></div>
                        {% endif %}
                    </div>
                    <div class="obj_table_raw wrapper_cancel_notice">
                        <div class="obj_table_cell_x2 obj_font_size_11_weight_normal obj_font_color_light_black">취소 가능 시간까지 <span class="obj_font_color_black">3시간 26분</span> 남았습니다.</div>
                        <div class="obj_table_cell_x2 obj_button_gen obj_font_bg_white_grey" onclick="">취소하기</div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="wrapper_current_ticket">
            <div class="obj_box_full">
                <div class="wrapper_sub_title obj_font_size_11_weight_bold obj_font_color_dark_grey">진행중인 수강권</div>
                {% for ing_lecture_info in ing_lecture_data %}
                <div class="obj_box_card" onclick="layer_popup.open_layer_popup(POPUP_AJAX_CALL, 'popup_ticket_info', 90, POPUP_FROM_BOTTOM, {'lecture_id':'{{ing_lecture_info.lecture_tb_id}}' } )">
                    <div class="wrapper_my_ticket_type">
                        <div class="obj_font_size_12_weight_bold obj_font_color_white">{{ ing_lecture_info.lecture_tb.package_tb.package_type_cd_nm }}</div>
                    </div>
                    <div class="wrapper_my_ticket_title">
                        <div class="obj_font_size_15_weight_bold obj_font_color_white">{{ ing_lecture_info.lecture_tb.package_tb.name }}</div>
                    </div>

                    <div class="wrapper_my_ticket_detail">
                        <div class="obj_font_size_11_weight_bold obj_font_color_white">
                            {{ ing_lecture_info.lecture_tb.end_date | date:"Y.m.d(l)"|cut:"요일"  }}
                            <span class="obj_font_size_11_weight_normal">까지</span>
                            {{ ing_lecture_info.lecture_tb.lecture_rem_count }}번
                            <span class="obj_font_size_11_weight_normal">남았습니다.</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}

{% block local_js_footer %}
    <script type="text/javascript" src={% static_url "user/js/trainee/func/pters.trainee.func.schedule.js" %}></script>
    <script type="text/javascript">
    	//Nav바에 현재 페이지에 밑줄 표기
    	$('#nav_btn_home').addClass("nav_selected");
    </script>

{% endblock %}
