{% extends "popup/trainee_base_popup.html" %}
{% load static_url %}
{% block popup_base_css %}
    <!-- pters.trainee.popup.plan_view.css -->
    <link rel="stylesheet" href={% static_url "user/css/trainee/popup/pters.trainee.popup.myinfo_change.css" %}>
{% endblock %}
{% block popup_base_contents %}
    <div class="popup_my_info_change">
        <div class="wrapper_popup_title">
            <div class="obj_font_size_20_weight_bold">내 정보 </div>
        </div>

        <div class="obj_box_full">
            <form id="form_my_info">
                {% csrf_token %}
                <div style="display: none">
                    {{ form.as_p }}
                </div>
                <article>
                    <div class="wrapper_sub_title obj_font_size_11_weight_500 obj_font_color_dark_grey">이름</div>
                    <input type="text" name="first_name" class="obj_font_size_14_weight_500" placeholder="손욱">
                </article>
                <article>
                    <div class="wrapper_sub_title obj_font_size_11_weight_500 obj_font_color_dark_grey">아이디</div>
                    <input type="text" name="id" class="obj_font_size_14_weight_500" placeholder="sxnwxxk">
                </article>
                <article>
                    <div class="wrapper_sub_title obj_font_size_11_weight_500 obj_font_color_dark_grey">생년월일</div>
                    <input type="text" name="birthday" class="obj_font_size_14_weight_500" placeholder="1990.01.23">
                </article>
                <article>
                    <div class="wrapper_sub_title obj_font_size_11_weight_500 obj_font_color_dark_grey">연락처</div>
                    <input type="text" name="phone" class="obj_font_size_14_weight_500" placeholder="010-4461-6646">
                </article>
                <article>
                    <div class="wrapper_sub_title obj_font_size_11_weight_500 obj_font_color_dark_grey">이메일</div>
                    <input type="text" name="email" class="obj_font_size_14_weight_500" placeholder="sxnwxxk@gmail.com">
                </article>


                <!-- <input type="hidden" name="last_name" id="last_name" value="" >
                <input type="hidden" name="sex" id="newsex" value="" >
                <input type="hidden" name="contents" id="contents" value="" > -->
                <input type="hidden" name="next_page" id="id_next_page" value="{% url 'trainee:get_trainee_info' %}">


            </form>
        </div>
    </div>
{% endblock %}

{% block popoup_base_wrapper_bottom_inside %}
    <div class="obj_button_big obj_font_bg_white_pink" onclick="func_send_my_info_change()">저장하기</div>
{% endblock %}

{% block popup_base_js %}
    <script type="text/javascript">

        function func_send_my_info_change(){
            $.ajax({
                url:'/trainee/update_trainee_info/',
                type:'POST',
                data : $('#form_my_info').serialize(),
                dataType : 'html',

                beforeSend:function(){
                },

                //통신성공시 처리
                success:function(data){
                    var jsondata = JSON.parse(data);
                    if(jsondata.messageArray.length > 0){
                        layer_popup.close_layer_popup();
                        show_error_message(error_message[0]);
                    }else{
                        layer_popup.close_layer_popup();
                        alert("정보를 변경하였습니다.");
                        location.reload(true);
                    }
                    
                },

                //보내기후 팝업창 닫기
                complete:function(){
                },

                //통신 실패시 처리
                error:function(){

                }
            });
        }


    </script>
{% endblock %}
