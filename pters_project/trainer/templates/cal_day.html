{% extends "trainer_base.html" %}
{% load static %}

{% block local_css %}
        <link rel="stylesheet" href={% static "user/css/pters.day.cal.css" %}>
        <link rel="stylesheet" href={% static "user/css/pters.mini.cal.css" %}>
        <link rel="stylesheet" href={% static "user/css/pters.add.style.css" %}>
{% endblock %}

{% block content %}

<!-- 로딩 
<img src="/static/user/res/loader.gif" alt="데이터 로딩중" style="width:100%;" class="loaders">
  -->
  <form action="{% url 'trainer:daily_pt_delete' %}" id="daily-pt-delete-form" method="post">
    <input type="hidden" name="schedule_id" id="id_schedule_id">
    <input type="hidden" name="member_name"   id="id_member_name">
    <input type="hidden" name="next_page" value = '{% url 'trainer:cal_day' %}'>
  </form>
  <form action="{% url 'trainer:daily_off_delete' %}" id="daily-off-delete-form" method="post">
    <input type="hidden" name="off_schedule_id" id="id_off_schedule_id">
    <input type="hidden" name="next_page" value = '{% url 'trainer:cal_day' %}'>
  </form>

  <form action="{% url 'trainer:modify_pt' %}" id="pt-modify-form" method="get">
    <input type="hidden" name="schedule_id" id="id_schedule_id_modify">
    <input type="hidden" name="lecture_id"   id="id_lecture_id_modify">
    <input type="hidden" name="next_page" value = '{% url 'trainer:cal_day' %}'>

  </form>
  <form action="{% url 'trainer:modify_off' %}" id="off-modify-form" method="get">
    <input type="hidden" name="off_schedule_id" id="id_off_schedule_id_modify">
    <input type="hidden" name="next_page" value = '{% url 'trainer:cal_day' %}'>
  </form>
   
  <!--팝업메뉴-->
    <div id="cal_popup">
      <div id="popup_img"><img src="/static/user/res/ptadd/icon-cal.png" id="img_cal"><img src="/static/user/res/ptadd/btn-x.png" id="btn_close"></div><div id="popup_info"></div><div id="popup_info2"></div>
      <div id="popup_text1" class="popup_inner popup_inner_change"><span>일정 변경</span></div>
      <div id="popup_text2" class="popup_inner popup_inner_delete"><span>일정 삭제</span></div>
    </div>
    <!--현재 클릭한 일정의 요소 보기: pters.day.cal.js 19행 console.log 주석 참고-->
  <!--팝업메뉴-->

  <!--삭제 확인 팝업메뉴-->
    <div id="cal_popup3">
      <div id="popup_img"><img src="/static/user/res/ptadd/icon-cal.png" id="img_cal"><img src="/static/user/res/ptadd/btn-x.png" id="btn_close3"></div><div id="popup_info3">정말 일정을 삭제하시겠습니까?</div>
      <div id="popup_text3" class="popup_inner popup_inner_delete"><span style="left:48%;color:#282828;">예</span></div>
      <div id="popup_text4" class="popup_inner popup_inner_delete"><span style="left:44.5%;">아니오</span></div>
    </div>
    
  <!--플로팅 버튼-->
  <div id="float_btn_wrap">
    <div id="float_btn">
      <img src={% static "user/res/floatbtn/btn-plus.png" %} alt="">  <!--2017.10.2-->
    </div>
    <div id="float_inner1" class="float_inner">
    <a>PT<br/>일정</a>
    </div>
    <div id="float_inner2" class="float_inner">
    <a>OFF<br/>일정</a>
    </div>
  </div>
  <div id="shade2">
  </div>
  <div id="shade3">
  </div>
  <!--플로팅 버튼-->


  <!--PC버전 Arrow-->
    <div class="arrowButtonPC">
        <a id="leftarrowPC" style="left: 10%"><img src={% static "user/res/icon-setting-arrow.png" %} alt="" style="-webkit-transform:rotate(180deg);width: 12px;left: 0;"></a>
        <a id="rightarrowPC" style="right: 10%"><img src={% static "user/res/icon-setting-arrow.png" %} alt="" style="width: 12px;right: 0;"></a>
    </div>
    
     <div id="ymdText" class="wrap" style="background-image:url(/static/user/res/bg.png);background-size: 100%;">
            <div class='arrowButton'>
              <a href="" style="left: 10%"><img src={% static "user/res/daycal_arrow.png" %} alt="" style="width: 7px;"></a>
              <a href="" style="right: 10%"><img src={% static "user/res/daycal_arrow.png" %} alt="" style="-webkit-transform:rotate(180deg);width: 7px;"></a>
            </div>
            <div id="yearText">
            </div>
            <div id="monthText">
            </div>
    </div>
    
    <div id="calendar" class="container wrap"> <!-- Calendar container-->
          <div class="swiper-container">
            <div class="swiper-wrapper"> 
              <div class="swiper-slide" id="slide_first"><div class="slide-notice"><img src="/static/user/res/stopmark.png" alt="Stop!"><span>일정 설정 및 확인은 최대 2주전까지 가능합니다.</span></div></div> <!--Index2-->
              <div class="swiper-slide" id="slide1"></div> <!--Index0-->
              <div class="swiper-slide" id="slide2"></div> <!--Index1-->
              <div class="swiper-slide" id="slide3"></div> <!--Index2-->
              <div class="swiper-slide" id="slide4"></div> <!--Index2-->
              <div class="swiper-slide" id="slide5"></div> <!--Index2-->
              <div class="swiper-slide" id="slide6"></div> <!--Index2-->
              <div class="swiper-slide" id="slide7"></div> <!--Index2-->
              <div class="swiper-slide" id="slide8"></div> <!--Index2-->
              <div class="swiper-slide" id="slide9"></div> <!--Index2-->
              <div class="swiper-slide" id="slide10"></div> <!--Index2-->
              <div class="swiper-slide" id="slide11"></div> <!--Index2-->
              <div class="swiper-slide" id="slide12"></div> <!--Index2-->
              <div class="swiper-slide" id="slide13"></div> <!--Index2-->
              <div class="swiper-slide" id="slide14"></div> <!--Index2-->
              <div class="swiper-slide" id="slide15"></div> <!--Index2-->
              <div class="swiper-slide" id="slide16"></div> <!--Index2-->
              <div class="swiper-slide" id="slide17"></div> <!--Index2-->
              <div class="swiper-slide" id="slide18"></div> <!--Index2-->
              <div class="swiper-slide" id="slide19"></div> <!--Index2-->
              <div class="swiper-slide" id="slide20"></div> <!--Index2-->
              <div class="swiper-slide" id="slide21"></div> <!--Index2-->
              <div class="swiper-slide" id="slide22"></div> <!--Index2-->
              <div class="swiper-slide" id="slide23"></div> <!--Index2-->
              <div class="swiper-slide" id="slide24"></div> <!--Index2-->
              <div class="swiper-slide" id="slide25"></div> <!--Index2-->
              <div class="swiper-slide" id="slide26"></div> <!--Index2-->
              <div class="swiper-slide" id="slide27"></div> <!--Index2-->
              <div class="swiper-slide" id="slide28"></div> <!--Index2-->
              <div class="swiper-slide" id="slide29"></div> <!--Index2-->
              <div class="swiper-slide" id="slide_last"><div class="slide-notice"><img src="/static/user/res/stopmark.png" alt="Stop!"><span>일정 설정 및 확인은 최대 2주후까지 가능합니다.</span></div></div> <!--Index2-->
            </div>  <!--Swiper-wrapper-->
          </div> <!--Swiper-container-->
  
<!--Swiper-->    
          <!-- <div class="swiper-pagination"></div> -->
          <div id="cal_box" class="cal_box"></div>    
    </div>

    

<div id="page-ptadd" class="wrap">
    {% if messages %}
        {% for message in messages %}
            <div id="inputError">
                    <div id="errorMsg" class="inputErrorInner"><p style="line-height: 35px;vertical-align: middle;margin:0;">{{ message }}</p></div>
            </div>
        {% endfor %}
    {% endif %}
    <form action="{% url 'trainer:add_pt_logic' %}" id="pt-add-form" method="post">
        <input type="hidden" name="lecture_id"    id="id_lecture_id">
        <input type="hidden" name="member_name"   id="id_member_name">
        <input type="hidden" name="training_date" id="id_training_date">
        <input type="hidden" name="time_duration" id="id_time_duration">
        <input type="hidden" name="training_time" id="id_training_time">
        <input type="hidden" name="next_page" value = '{% url 'trainer:cal_day' %}'>
    </form>


    <div id="memberName" class="ptaddbox">
      <div class="ptaddboxtext"> <img class="icons" src={% static "user/res/ptadd/icon-name.png" %}> 회원명</div>
      <div id="membersSelected" class="dropdown">
        <button class="btn btn-default dropdown-toggle pters_dropdown_custom" type="button" data-toggle="dropdown"><span style="color:#cccccc;">회원명 선택</span></button>
        <img src="/static/user/res/memberadd/icon-down.png" alt="" class="icondown">
        <ul id="members" class="dropdown-menu pters_dropdown_custom">
          <!-- 회원명 DB연동 필요-->
            {% for lecture in trainer_member %}
            <li><a data-lecturecount="{{ lecture.lecture_avail_count }}" data-lectureid="{{ lecture.lecture_id}}">
                {{ lecture.trainer_member.name }}</a>
            </li>
            {% endfor %}
        </ul>
      </div>
    </div>


    <div id="remainCount" class="ptaddbox">
      <div class="ptaddboxtext"><img class="icons" style="width:13px;" src={% static "user/res/ptadd/icon-count.png" %}> 남은 횟수</div>
      <!-- 남은 횟수 DB연동 필요 -->
            <div id="countsSelected" class="dropdown" placeholder="자동으로 입력됩니다."></div>
    </div>


    <div id="dateSelector" class="ptaddbox">
      <div class="ptaddboxtext"><img class="icons" src={% static "user/res/ptadd/icon-cal.png" %}> 날짜</div>
      <p class="datepicktext dropdown"><input type="text" id="datepicker" placeholder="-" readonly></p>  
    </div>

    <div id="timeGraph" class="ptaddbox" style="display: none;">
      <table class="timegraphtext">
        <tbody>
          <tr>
            <td class="">5</td>
            <td class="">6</td>
            <td class="">7</td>
            <td class="">8</td>
            <td class="">9</td>
            <td class="">10</td>
            <td class="">11</td>
            <td class="">12</td>
            <td class="">13</td>
            <td class="">14</td>
            <td class="">15</td>
            <td class="">16</td>
            <td class="">17</td>
            <td class="">18</td>
            <td class="">19</td>
            <td class="">20</td>
            <td class="">21</td>
            <td class="">22</td>
            <td class="">23</td>
            <td class="">24</td>
          </tr>
          <tr>
            <td id="5g" class="tdgraph"></td>
            <td id="6g" class="tdgraph"></td>
            <td id="7g" class="tdgraph"></td>
            <td id="8g" class="tdgraph"></td>
            <td id="9g" class="tdgraph"></td>
            <td id="10g" class="tdgraph"></td>
            <td id="11g" class="tdgraph"></td>
            <td id="12g" class="tdgraph"></td>
            <td id="13g" class="tdgraph"></td>
            <td id="14g" class="tdgraph"></td>
            <td id="15g" class="tdgraph"></td>
            <td id="16g" class="tdgraph"></td>
            <td id="17g" class="tdgraph"></td>
            <td id="18g" class="tdgraph"></td>
            <td id="19g" class="tdgraph"></td>
            <td id="20g" class="tdgraph"></td>
            <td id="21g" class="tdgraph"></td>
            <td id="22g" class="tdgraph"></td>
            <td id="23g" class="tdgraph"></td>
            <td id="24g" class="tdgraph"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div id="classStartTime" class="ptaddbox">
      <div class="ptaddboxtext"><img class="icons" src={% static "user/res/ptadd/icon-start.png" %}> 시작 시간</div>
      <div id="starttimesSelected" class="dropdown">
        <button class="btn btn-default dropdown-toggle pters_dropdown_custom" type="button" data-toggle="dropdown"><span style="color:#cccccc;">선택</span></button>
        <img src="/static/user/res/memberadd/icon-down.png" alt="" class="icondown">
        <ul id="starttimes" class="dropdown-menu pters_dropdown_custom">
       
       </ul>
      </div>
    </div>

    <div id="classDuration" class="ptaddbox">
      <div class="ptaddboxtext"><img class="icons" src={% static "user/res/ptadd/icon-clock.png" %}> 진행 시간</div>
      <div id="durationsSelected" class="dropdown">
        <button class="btn btn-default dropdown-toggle pters_dropdown_custom" type="button" data-toggle="dropdown"><span style="color:#cccccc;">선택</span></button>
        <img src="/static/user/res/memberadd/icon-down.png" alt="" class="icondown">
        <ul id="durations" class="dropdown-menu pters_dropdown_custom">

        </ul>
      </div>
    </div> 

    <div class='popupBtn'>
      <div class="submitBtn"><span>일정 등록</span></div>
      <div class="cancelBtn"><span>취소</span></div>
    </div>

</div>



<div id="page-offadd" class="wrap">
        {% if messages %}
        {% for message in messages %}
            <div id="inputError">
                    <div id="errorMsg" class="inputErrorInner"><p style="line-height: 35px;vertical-align: middle;margin:0;">{{ message }}</p></div>
            </div>
        {% endfor %}
        {% endif %}

    <form action="{% url 'trainer:add_off_logic' %}" id="off-add-form" method="post">
        <input type="hidden" name="training_date" id="id_training_date_off">
        <input type="hidden" name="time_duration" id="id_time_duration_off">
        <input type="hidden" name="training_time" id="id_training_time_off">
        <input type="hidden" name="next_page" value = '{% url 'trainer:cal_day' %}'>
    </form>

    <div id="dateSelector_off" class="ptaddbox">
      <div class="ptaddboxtext"><img class="icons" src={% static "user/res/ptadd/icon-cal.png" %}> 날짜</div>
      <p class="datepicktext dropdown"><input type="text" id="datepicker_off" placeholder="-" readonly></p>  
    </div>

    <div id="timeGraph_off" class="ptaddbox" style="display: none;">
      <table class="timegraphtext">
        <tbody>
          <tr>
            <td class="">5</td>
            <td class="">6</td>
            <td class="">7</td>
            <td class="">8</td>
            <td class="">9</td>
            <td class="">10</td>
            <td class="">11</td>
            <td class="">12</td>
            <td class="">13</td>
            <td class="">14</td>
            <td class="">15</td>
            <td class="">16</td>
            <td class="">17</td>
            <td class="">18</td>
            <td class="">19</td>
            <td class="">20</td>
            <td class="">21</td>
            <td class="">22</td>
            <td class="">23</td>
            <td class="">24</td>
          </tr>
          <tr>
            <td id="5g_off" class="tdgraph"></td>
            <td id="6g_off" class="tdgraph"></td>
            <td id="7g_off" class="tdgraph"></td>
            <td id="8g_off" class="tdgraph"></td>
            <td id="9g_off" class="tdgraph"></td>
            <td id="10g_off" class="tdgraph"></td>
            <td id="11g_off" class="tdgraph"></td>
            <td id="12g_off" class="tdgraph"></td>
            <td id="13g_off" class="tdgraph"></td>
            <td id="14g_off" class="tdgraph"></td>
            <td id="15g_off" class="tdgraph"></td>
            <td id="16g_off" class="tdgraph"></td>
            <td id="17g_off" class="tdgraph"></td>
            <td id="18g_off" class="tdgraph"></td>
            <td id="19g_off" class="tdgraph"></td>
            <td id="20g_off" class="tdgraph"></td>
            <td id="21g_off" class="tdgraph"></td>
            <td id="22g_off" class="tdgraph"></td>
            <td id="23g_off" class="tdgraph"></td>
            <td id="24g_off" class="tdgraph"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div id="offStartTime" class="ptaddbox">
      <div class="ptaddboxtext"><img class="icons" src={% static "user/res/ptadd/icon-start.png" %}> 시작 시간</div>
      <div id="starttimesSelected_off" class="dropdown">
        <button class="btn btn-default dropdown-toggle pters_dropdown_custom" type="button" data-toggle="dropdown"><span style="color:#cccccc;">선택</span></button>
        <img src="/static/user/res/memberadd/icon-down.png" alt="" class="icondown">
        <ul id="starttimes_off" class="dropdown-menu pters_dropdown_custom">

        </ul>
      </div>
    </div>

    <div id="offDuration" class="ptaddbox">
      <div class="ptaddboxtext"><img class="icons" src={% static "user/res/ptadd/icon-clock.png" %}> 진행 시간</div>
      <div id="durationsSelected_off" class="dropdown">
        <button class="btn btn-default dropdown-toggle pters_dropdown_custom" type="button" data-toggle="dropdown"><span style="color:#cccccc;">선택</span></button>
        <img src="/static/user/res/memberadd/icon-down.png" alt="" class="icondown">
        <ul id="durations_off" class="dropdown-menu pters_dropdown_custom">
        </ul>
      </div>
    </div>

    <div id="repeatSchedule" class="ptaddbox repeatbox">
      <div id="repeatScheduleText" class="ptaddboxtext repeattext">
        <img src={% static "user/res/ptadd/icon-repeat-cal.png" %} class="icons">
         <span onclick="location.href='{% url 'trainer:add_repeat_off' %}'">반복일정</span>
         <img class="icons-next-button" src={% static "user/res/ptadd/btn-next-white.png" %}>
       </div>
      
      <!--반복일정 박스-->
      <div class="repeatboxinner">
        <span class="repeatstarttext">매주 월요일 오전 11시</span><span class="repeatfinishtext">반복종료 : PT 마감시</span>
      </div>
      
      <!--반복일정 박스-->
      <div class="repeatboxinner">
        <span class="repeatstarttext">매주 수요일 오후 3시</span><span class="repeatfinishtext">반복종료 : 2017-12-31</span>
      </div>
    </div>
    
    <div class='popupBtn'>
      <div class="submitBtn"><span>일정 등록</span></div>
      <div class="cancelBtn"><span>취소</span></div>
    </div>

  </div>

</div>


{% endblock %}

{% block local_js_footer %}
    <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->

        <script>
            //front-end에서 다뤄야하는 데이터
        	var classTimeArray_start_date = [{% for daily_data_start_date in daily_lecture_data_start_date %}'{{ daily_data_start_date }}',{% endfor %}];
        	var classTimeArray_end_date = [{% for daily_data_end_date in daily_lecture_data_end_date %}'{{ daily_data_end_date }}',{% endfor %}];
        	var classTimeArray_member_name = [{% for member_name in daily_lecture_data_member %}'{{ member_name }}',{% endfor %}];
            var classArray_lecture_id = [{% for lecture_id in daily_lecture_data_id %}'{{ lecture_id }}',{% endfor %}];
            var offTimeArray_start_date = [{% for daily_off_start_date in daily_off_data_start_date %}'{{ daily_off_start_date }}',{% endfor %}];
            var offTimeArray_end_date = [{% for daily_off_end_date in daily_off_data_end_date %}'{{ daily_off_end_date }}',{% endfor %}];

            var scheduleIdArray = [{% for daily_lecture_schedule_id in daily_lecture_schedule_id %}'{{ daily_lecture_schedule_id }}',{% endfor %}];
            var offScheduleIdArray = [{% for daily_class_schedule_id in class_schedule_data %}'{{ daily_class_schedule_id }}', {% endfor %}];
            var classTimeArray = [];
            var offTimeArray = [];
        </script>
        <script type="text/javascript" src={% static "user/js/trainer/pters.trainer.cal.day.js" %}></script>
        <script>
            var myswiper = new Swiper('.swiper-container',{
                initialSlide : 9,
                speed : 150,
                preventClicks : true,
                keyboardControl : true
            });
            $('.arrowButtonPC a:nth-child(1)').click(function(){
              myswiper.slidePrev(100)  
            })

            $('.arrowButtonPC a:nth-child(2)').click(function(){
              myswiper.slideNext(100)  
            })
        </script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script type="text/javascript" src={% static "user/js/trainer/pters.trainer.cal.add.pt.js" %}></script>
        <script type="text/javascript" src={% static "user/js/trainer/pters.trainer.cal.add.off.js" %}></script>
{% endblock %}