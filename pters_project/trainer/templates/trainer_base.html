<!DOCTYPE html>
<html lang="en">
<head>
    {% load static_url %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="google-site-verification" content="EPm2stOoq7M_LaK0htEQNqbitGznovZCakPO78TPtsk" />
    <meta name="naver-site-verification" content="919ceda7d377b0d22cf390ca79de5dc21dc3d0fa"/>
    <meta name="description" content="PTERS 피터스 PT, 요가, 필라테스, 당구, 골프 등 레슨 회원관리와 일정을 관리하는 서비스 프로그램">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>{% block title %}PTERS{% endblock %}</title>

    <link rel="icon" href="/static/common/favicon.ico">
    <link rel="apple-touch-icon" href="/static/common/favicon-48.png">
    <link rel="shortcut icon" href="/static/common/favicon-48.png">

    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="/static/user/css/trainer/pters.trainer.fundamental.css">
    <link rel="stylesheet" href="/static/user/css/trainer/pters.trainer.object.css">

    <!-- 메뉴_calendar -->
    <link rel="stylesheet" href={% static_url "user/css/trainer/func/pters.trainer.func.calendar.css" %}>
    <!-- 메뉴_calendar -->

    <style>
        #root_progress{
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            max-width: 800px;
            z-index: 1500;
        }
        progress {
            display:inline-block;
            width:100%;
            height:6px;
            margin:0;
            background:none;
            border: 0;
            border-radius: 1px;
            text-align: left;
            position:relative;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 0.8em;
            vertical-align: top;
        }
        progress::-webkit-progress-bar {
            height:3px;
            width:100%;
            margin:0 auto;
            background-color: #FFF;
            border-radius: 1px;
            /* box-shadow:0px 0px 6px #777 inset; */
        }
        progress::-webkit-progress-value {
            display:inline-block;
            float:left;
            height:3px;
            margin:0px -3px 0 0;
            background: #ff3b44;
            border-radius: 1px;
            /* box-shadow:0px 0px 6px #777 inset; */
        }


        #root_content{
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 800px;
            width: 100%;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            /* overscroll-behavior-y: contain; */
            z-index: 0;
            background-color: #f7f5f6;
            height: 100%;
        }
        #root_nav{
            position: fixed;
            width: 100%;
            max-width: 800px;
            height: 60px;
            background-color: #ffffff;
            left: 50%;
            transform: translateX(-50%);
            bottom: 0;
            text-align: center;
            transition: 0.2s;
        }
        .ajax_loading_image{
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70px;
            z-index: 1500;
        }
    </style>
    {% block local_css %}
    {% endblock %}
</head>
<body>
<img src="/static/user/res/ajax/loading.gif" alt="" class="ajax_loading_image">

{% block navbar %}
{% endblock %}

<div id="shade_for_popup_basic" style="position:fixed;top:0;height:100%;width:100%;background-color:#282828;opacity:0.5; display: none;" 
onclick="layer_popup.all_close_layer_popup();"></div>

<div id="root_progress">
    <progress id="progress_bar" value="0" max="100"></progress>
</div>

<div id="root_content">
    {% block content %}
    {% endblock %}
</div>

<nav id="root_nav">
    <div class="obj_table_raw" style="height:60px;">
        <!-- <div class="obj_table_cell_x5" onclick="sideGoPage('trainer_main')"> -->
        <div class="obj_table_cell_x5" onclick="location.href='/trainer/trainer_main/' ">
            <div><img src="/static/common/icon/icon_home.png" alt=""></div>
            <!-- <div>홈</div> -->
        </div>
        <div class="obj_table_cell_x5" onclick="sideGoPage('calendar')">
            <div><img src="/static/common/icon/icon_cal.png" alt=""></div>
            <!-- <div>일정</div> -->
        </div>
        <div class="obj_table_cell_x5" onclick="sideGoPage('lecture')">
            <div><img src="/static/common/icon/icon_lecture.png" alt=""></div>
            <!-- <div>수업</div> -->
        </div>
        <div class="obj_table_cell_x5" onclick="sideGoPage('member')">
            <div><img src="/static/common/icon/icon_member.png" alt=""></div>
            <!-- <div>회원</div> -->
        </div>
        <div class="obj_table_cell_x5" onclick="sideGoPage('setting')">
            <div><img src="/static/common/icon/icon_more.png" alt=""></div>
            <!-- <div>더보기</div> -->
        </div>
    </div>
</nav>

<footer>

</footer>


{% block footer %}

{% endblock %}
<script type="text/javascript" src={% static_url "common/js/jquery.1.12.4.min.js" %}></script>
<script type="text/javascript" src={% static_url "common/js/jquery-ui.1.12.1.min.js" %}></script>
<script type="text/javascript" src={% static_url "user/js/trainer/pters.trainer.const.js" %}></script>
<script type="text/javascript" src={% static_url "user/js/trainer/pters.trainer.fundamental.js" %}></script>

<!-- 페이지 스크립트 로드-->
<script type="text/javascript" src={% static_url "user/js/trainer/func/pters.trainer.func.calendar.js" %}></script>
<script type="text/javascript" src={% static_url "user/js/trainer/func/pters.trainer.func.lecture.js" %}></script>
<script type="text/javascript" src={% static_url "user/js/trainer/func/pters.trainer.func.member.js" %}></script>
<script type="text/javascript" src={% static_url "user/js/trainer/func/pters.trainer.func.setting.js" %}></script>
<!-- 페이지 스크립트 로드-->
<!-- POPUP Behavior -->
<script type="text/javascript" src={% static_url "user/js/trainer/pters.trainer.popup.behavior.js" %}></script>
<!-- POPUP Behavior -->


<script>
    //기기종류 판단
    const varUA = navigator.userAgent.toLowerCase();
    let device = PC;
    let os = IOS;
    let browser = CHROME;
    if (varUA.match(/android/) != null) {
        device = MOBILE;
        os = ANDROID;
    }else if (varUA.match(/iphone/) != null || varUA.match(/ipad/) != null || varUA.match(/ipod/) != null) {
        device = MOBILE;
        os = IOS;
    }else if (varUA.match(/macintosh/) != null){
        device = PC;
        os = IOS;
    }else{
        device = PC;
        os = WINDOW;
    }

    if (varUA.match(/firefox/) != null) {
        browser = FIREFOX;
    }else if (varUA.match(/chrome/) != null || varUA.match(/chromium/) != null) {
        browser = CHROME;
    }else if (varUA.match(/safari/) != null) {
        browser = SAFARI;
    }else if (varUA.match(/edge/) != null) {
        browser = EDGE;
    }

    const initial_window_height = window.innerHeight;
    const initial_window_width = window.innerWidth;
    const $root_content = $('#root_content');
    func_set_webkit_overflow_scrolling('#root_content');

    $root_content.scroll(function(){
        let scroll_loc = $(this).scrollTop();
        let element_height = $(this).innerHeight();
        let scroll_height = $(this).prop('scrollHeight');
   
        let scroll_loc_percent = 100*(scroll_loc)/(scroll_height-element_height);
        if( scroll_loc_percent > 10 && scroll_loc_percent > 90){
            nav_bar('off');
        }else{
            nav_bar('on');
        }
    });

    function nav_bar(action){
        switch(action){
            case 'on':
                $('#root_nav').css({'transform':'translate(-50%, 0px)'})
            break;
            case 'off':
                $('#root_nav').css({'transform':'translate(-50%, 60px)'})
            break;
        }
    }

    function progress_bar(percentage){
        $root_progress = $('#root_progress');
        $progress_bar = $('#progress_bar');
        $progress_bar.val(percentage);

        if(percentage == 100){
            $root_progress.fadeOut();
        }else{
            $root_progress.fadeIn();
        }
    }

    // function sideGoPage(page){
    //     let url = "/trainer/"+page+'/';
    //     $.ajax({
    //         url: url,
    //         // data: data,
    //         dataType : 'html',
    //         // type:'POST',

    //         beforeSend:function(xhr, settings){
    //             progress_bar(50);
    //             //$('.ajax_loading_image').show();
    //         },
    //         success:function(data){
    //             $root_content.html(data);
    //         },
    //         complete:function(){
    //             progress_bar(100);
    //             //$('.ajax_loading_image').hide();
    //         },

    //         error:function(){
    //             console.log('server error');
    //         }
    //     });
    // }
    

    
    var calendar = new Calendar('#root_content', 'calendar');
    var lecture = new Lecture('#root_content', 'lecture');
    var member = new Member('#root_content', 'member');
    var setting = new Setting('#root_content', 'setting');

    function sideGoPage(page){
        switch(page){
            case 'home':
                $root_content.html('<div>main 페이지</div>');
            break;
            case 'calendar':
                calendar.init("month");
            break;
            case 'lecture':
                lecture.init();
            break;
            case 'member':
                member.init();
            break;
            case 'setting':
                setting.init();
            break;
        }


    }

    


</script>

{% block local_js_footer %}
{% endblock %}

</body>
</html>